# コードレビュー

> **パラメータ**: `$ARGUMENTS` に `identifier` を指定してください
>
> - 形式: `/review <identifier>`
> - 例: `/review SMP-123`
>
> **指示**: このプロンプトはコードレビューのみを目的としています。
>
> - コードの実装・修正は行わないでください
> - `spec/<identifier>/` 配下のドキュメントを検索し、見つかったものを元にレビューを実施してください
> - レビュー結果はチャット上に出力してください（ファイル保存は不要）

---

## 参照ドキュメント

`spec/<identifier>/` 配下を検索し、以下のドキュメントがあれば読み込んでください:

### 機能開発フロー

| ドキュメント       | 確認観点                               |
| ------------------ | -------------------------------------- |
| `requirement.md`   | 受け入れ条件・ビジネスルールとの整合性 |
| `design.md`        | 設計通りの実装か                       |
| `tasks.md`         | 対応UCとの紐付け・依存関係             |

### バグ修正フロー

| ドキュメント | 確認観点                   |
| ------------ | -------------------------- |
| `bugfix.md`  | 修正方針通りの実装か       |

### 小規模改修フロー

| ドキュメント  | 確認観点                     |
| ------------- | ---------------------------- |
| `feature.md`  | 受け入れ条件を満たすか       |

---

## 変更ファイルの特定

以下の方法で変更ファイルを特定してください:

1. **Git差分の確認**: `git diff` または `git status` で変更されたファイルを確認
2. **関連ファイルの探索**: ドキュメントに記載された対象ファイル・クラス・関数を探索

---

## レビュー観点

### 1. 仕様との整合性

- [ ] ドキュメントに記載された要件を満たしているか
- [ ] 受け入れ条件がすべてクリアされているか
- [ ] ビジネスルールが正しく実装されているか

### 2. コード品質

- [ ] ロジックの正確性
- [ ] エラーハンドリングの適切性
- [ ] 命名・可読性
- [ ] コードの重複がないか
- [ ] 適切な抽象化がされているか

### 3. パフォーマンス

- [ ] 不要なループ・計算がないか
- [ ] N+1問題がないか
- [ ] 適切なキャッシュ・インデックスが使用されているか

### 4. セキュリティ

- [ ] 認証・認可が適切か
- [ ] SQLインジェクション対策
- [ ] XSS対策
- [ ] 機密情報の適切な取り扱い

### 5. テスト

- [ ] テストコードが追加されているか
- [ ] 正常系・異常系がカバーされているか
- [ ] エッジケースが考慮されているか

---

## 出力形式

# レビュー結果: {機能名 or バグ修正名}

## 概要

- **種別**: {機能開発 / バグ修正 / 小規模改修}
- **対象**: {ドキュメントから抽出}
- **参照ドキュメント**: {読み込んだドキュメント一覧}
- **レビュー日**: {現在日付}
- **レビュー結果**: {承認 / 要修正 / 差し戻し}

## 変更ファイル一覧

| ファイル | 変更種別 | 概要 |
| -------- | -------- | ---- |
| {ファイルパス} | {追加/変更/削除} | {変更内容の概要} |

## 仕様との整合性チェック

### 要件・受け入れ条件

| 条件 | 結果 | 備考 |
| ---- | ---- | ---- |
| {条件1} | ✅/❌ | {コメント} |
| {条件2} | ✅/❌ | {コメント} |

## 指摘事項

### 重大（修正必須）

| No | ファイル | 行 | 指摘内容 | 改善案 |
| -- | -------- | -- | -------- | ------ |
| C-01 | {ファイル} | {行} | {指摘内容} | {改善案} |

### 軽微（推奨）

| No | ファイル | 行 | 指摘内容 | 改善案 |
| -- | -------- | -- | -------- | ------ |
| M-01 | {ファイル} | {行} | {指摘内容} | {改善案} |

### 質問・確認事項

| No | 内容 |
| -- | ---- |
| Q-01 | {確認したい内容} |

## 良かった点

- {良かった点1}
- {良かった点2}

## 総評

{全体的な評価コメント}

---

## 次のステップ

> レビューが完了したら:
>
> **承認の場合**:
> ```
> マージ・デプロイに進んでください
> ```
>
> **要修正の場合**:
> ```
> 指摘事項を修正後、再度 /review <identifier> を実行してください
> ```
